<html>
<head>
<title>ASCII comments generator</title>
<script type="text/javascript" src="jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="jquery.cookie.js"></script>
<script>
/*
    Каждые 7 строк обозначают новый ASCII символ.
    Здесь описаны символы начиная с пробела[32] и заканчивая тильдой[126].
*/
var font = [
    '   ',
    '   ',
    '   ',
    '   ',
    '   ',
    '   ',
    '   ',
    ' #',
    ' #',
    ' #',
    ' #',
    ' #',
    '  ',
    ' #',
    ' # #',
    ' # #',
    '    ',
    '    ',
    '    ',
    '    ',
    '    ',
    '  # # ',
    '  # # ',
    ' #####',
    '  # # ',
    ' #####',
    '  # # ',
    '  # # ',
    '  ### ',
    ' # # #',
    ' # #  ',
    '  ### ',
    '   # #',
    ' # # #',
    '  ### ',
    ' ##  #',
    ' ##   ',
    ' ## # ',
    '   #  ',
    '  # ##',
    '    ##',
    ' #  ##',
    '   #  ',
    '  # # ',
    '   #  ',
    '  ##  ',
    ' # # #',
    ' #  # ',
    '  ## #',
    ' ##',
    ' ##',
    '  #',
    ' # ',
    '   ',
    '   ',
    '   ',
    '   #',
    '  # ',
    ' #  ',
    ' #  ',
    ' #  ',
    '  # ',
    '   #',
    ' #  ',
    '  # ',
    '   #',
    '   #',
    '   #',
    '  # ',
    ' #  ',
    '      ',
    ' #   #',
    '  # # ',
    ' #####',
    '  # # ',
    ' #   #',
    '      ',
    '      ',
    '   #  ',
    '   #  ',
    ' #####',
    '   #  ',
    '   #  ',
    '      ',
    '   ',
    '   ',
    '   ',
    '   ',
    ' ##',
    '  #',
    ' # ',
    '    ',
    '    ',
    '    ',
    ' ###',
    '    ',
    '    ',
    '    ',
    '  ',
    '  ',
    '  ',
    '  ',
    '  ',
    ' #',
    ' #',
    '      ',
    '     #',
    '    # ',
    '   #  ',
    '  #   ',
    ' #    ',
    '      ',
    '  ### ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    '  ### ',
    '   #  ',
    '  ##  ',
    ' # #  ',
    '   #  ',
    '   #  ',
    '   #  ',
    ' #####',
    '  ### ',
    ' #   #',
    '     #',
    '  ### ',
    ' #    ',
    ' #    ',
    ' #####',
    '  ### ',
    ' #   #',
    '     #',
    '  ### ',
    '     #',
    ' #   #',
    '  ### ',
    ' #    ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #####',
    '     #',
    '     #',
    ' #####',
    ' #    ',
    ' #    ',
    ' #### ',
    '     #',
    ' #   #',
    '  ### ',
    '  ### ',
    ' #   #',
    ' #    ',
    ' #### ',
    ' #   #',
    ' #   #',
    '  ### ',
    ' #####',
    ' #  # ',
    '   #  ',
    '  #   ',
    '  #   ',
    '  #   ',
    '  #   ',
    '  ### ',
    ' #   #',
    ' #   #',
    '  ### ',
    ' #   #',
    ' #   #',
    '  ### ',
    '  ### ',
    ' #   #',
    ' #   #',
    '  ####',
    '     #',
    ' #   #',
    '  ### ',
    ' ##',
    ' ##',
    '   ',
    '   ',
    ' ##',
    ' ##',
    '   ',
    ' ##',
    ' ##',
    '   ',
    ' ##',
    ' ##',
    '  #',
    ' # ',
    '    #',
    '   # ',
    '  #  ',
    ' #   ',
    '  #  ',
    '   # ',
    '    #',
    '     ',
    '     ',
    ' ####',
    '     ',
    ' ####',
    '     ',
    '     ',
    ' #   ',
    '  #  ',
    '   # ',
    '    #',
    '   # ',
    '  #  ',
    ' #   ',
    '  ### ',
    ' #   #',
    '     #',
    '  ### ',
    '  #   ',
    '      ',
    '  #   ',
    '  ### ',
    ' #   #',
    ' # # #',
    ' # # #',
    ' # ## ',
    ' #    ',
    '  ### ',
    '   #  ',
    '  # # ',
    ' #   #',
    ' #   #',
    ' #####',
    ' #   #',
    ' #   #',
    ' #### ',
    ' #   #',
    ' #   #',
    ' #### ',
    ' #   #',
    ' #   #',
    ' #### ',
    '  ### ',
    ' #   #',
    ' #    ',
    ' #    ',
    ' #    ',
    ' #   #',
    '  ### ',
    ' #### ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #### ',
    ' #####',
    ' #    ',
    ' #    ',
    ' #### ',
    ' #    ',
    ' #    ',
    ' #####',
    ' #####',
    ' #    ',
    ' #    ',
    ' #### ',
    ' #    ',
    ' #    ',
    ' #    ',
    '  ### ',
    ' #   #',
    ' #    ',
    ' #  ##',
    ' #   #',
    ' #   #',
    '  ### ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #####',
    ' #   #',
    ' #   #',
    ' #   #',
    ' ###',
    '  # ',
    '  # ',
    '  # ',
    '  # ',
    '  # ',
    ' ###',
    '     #',
    '     #',
    '     #',
    '     #',
    ' #   #',
    ' #   #',
    '  ### ',
    ' #   #',
    ' #  # ',
    ' # #  ',
    ' ##   ',
    ' # #  ',
    ' #  # ',
    ' #   #',
    ' #    ',
    ' #    ',
    ' #    ',
    ' #    ',
    ' #    ',
    ' #    ',
    ' #####',
    ' #    #',
    ' ##  ##',
    ' # ## #',
    ' # #  #',
    ' #    #',
    ' #    #',
    ' #    #',
    ' #   #',
    ' ##  #',
    ' # # #',
    ' #  ##',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #####',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #####',
    ' #### ',
    ' #   #',
    ' #   #',
    ' #### ',
    ' #    ',
    ' #    ',
    ' #    ',
    '  ### ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' # # #',
    ' #  # ',
    '  ## #',
    ' #### ',
    ' #   #',
    ' #   #',
    ' #### ',
    ' # #  ',
    ' #  # ',
    ' #   #',
    '  ### ',
    ' #   #',
    ' #    ',
    '  ### ',
    '     #',
    ' #   #',
    '  ### ',
    ' #####',
    '   #  ',
    '   #  ',
    '   #  ',
    '   #  ',
    '   #  ',
    '   #  ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    '  ### ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    '  # # ',
    '  # # ',
    '   #  ',
    ' #   #',
    ' # # #',
    ' # # #',
    ' # # #',
    ' # # #',
    ' # # #',
    '  # # ',
    ' #   #',
    '  # # ',
    '  # # ',
    '   #  ',
    '  # # ',
    '  # # ',
    ' #   #',
    ' #   #',
    '  # # ',
    '  # # ',
    '   #  ',
    '   #  ',
    '   #  ',
    '   #  ',
    ' #####',
    '     #',
    '    # ',
    '   #  ',
    '  #   ',
    ' #    ',
    ' #####',
    ' ###',
    ' #  ',
    ' #  ',
    ' #  ',
    ' #  ',
    ' #  ',
    ' ###',
    '      ',
    ' #    ',
    '  #   ',
    '   #  ',
    '    # ',
    '     #',
    '      ',
    ' ###',
    '   #',
    '   #',
    '   #',
    '   #',
    '   #',
    ' ###',
    '   #  ',
    '  # # ',
    ' #   #',
    '      ',
    '      ',
    '      ',
    '      ',
    '      ',
    '      ',
    '      ',
    '      ',
    '      ',
    '      ',
    ' #####',
    ' ##',
    ' ##',
    ' # ',
    '  #',
    '   ',
    '   ',
    '   ',
    '      ',
    '   #  ',
    '  # # ',
    ' #   #',
    ' #####',
    ' #   #',
    ' #   #',
    '      ',
    ' #### ',
    ' #   #',
    ' #### ',
    ' #   #',
    ' #   #',
    ' #### ',
    '      ',
    '  ### ',
    ' #   #',
    ' #    ',
    ' #    ',
    ' #   #',
    '  ### ',
    '      ',
    ' #### ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #### ',
    '      ',
    ' #####',
    ' #    ',
    ' #### ',
    ' #    ',
    ' #    ',
    ' #####',
    '      ',
    ' #####',
    ' #    ',
    ' #### ',
    ' #    ',
    ' #    ',
    ' #    ',
    '      ',
    '  ### ',
    ' #   #',
    ' #    ',
    ' #  ##',
    ' #   #',
    '  ### ',
    '      ',
    ' #   #',
    ' #   #',
    ' #####',
    ' #   #',
    ' #   #',
    ' #   #',
    '  ',
    ' #',
    ' #',
    ' #',
    ' #',
    ' #',
    ' #',
    '      ',
    '     #',
    '     #',
    '     #',
    '     #',
    ' #   #',
    '  ### ',
    '      ',
    ' #   #',
    ' #  # ',
    ' ###  ',
    ' # #  ',
    ' #  # ',
    ' #   #',
    '      ',
    ' #    ',
    ' #    ',
    ' #    ',
    ' #    ',
    ' #    ',
    ' #####',
    '      ',
    ' #   #',
    ' ## ##',
    ' # # #',
    ' #   #',
    ' #   #',
    ' #   #',
    '      ',
    ' #   #',
    ' ##  #',
    ' # # #',
    ' # # #',
    ' #  ##',
    ' #   #',
    '      ',
    '  ### ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    '  ### ',
    '      ',
    ' #### ',
    ' #   #',
    ' #   #',
    ' #### ',
    ' #    ',
    ' #    ',
    '      ',
    '  ### ',
    ' #   #',
    ' #   #',
    ' # # #',
    ' #  # ',
    '  ## #',
    '      ',
    ' #### ',
    ' #   #',
    ' #   #',
    ' #### ',
    ' #  # ',
    ' #   #',
    '      ',
    '  ### ',
    ' #    ',
    '  ### ',
    '     #',
    ' #   #',
    '  ### ',
    '      ',
    ' #####',
    '   #  ',
    '   #  ',
    '   #  ',
    '   #  ',
    '   #  ',
    '      ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    '  ### ',
    '      ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' #   #',
    '  # # ',
    '   #  ',
    '      ',
    ' #   #',
    ' #   #',
    ' #   #',
    ' # # #',
    ' ## ##',
    ' #   #',
    '      ',
    ' #   #',
    '  # # ',
    '   #  ',
    '   #  ',
    '  # # ',
    ' #   #',
    '      ',
    ' #   #',
    '  # # ',
    '   #  ',
    '   #  ',
    '   #  ',
    '   #  ',
    '      ',
    ' #####',
    '    # ',
    '   #  ',
    '   #  ',
    '  #   ',
    ' #####',
    '   ##',
    '  #  ',
    '  #  ',
    ' ##  ',
    '  #  ',
    '  #  ',
    '   ##',
    ' #',
    ' #',
    ' #',
    '  ',
    ' #',
    ' #',
    ' #',
    ' ##  ',
    '   # ',
    '   # ',
    '   ##',
    '   # ',
    '   # ',
    ' ##  ',
    '  #   ',
    ' # # #',
    '    # ',
    '      ',
    '      ',
    '      ',
    '      '
];

var types = {
    block: {
        begin: "/*",
        line: " *",
        end: " */"
    },
    inlineslashes: {
        line: "//"
    },
    inlinesharp: {
        line: "#"
    },
    html: {
        begin: "<!--",
        line: "  --",
        end: "  -->"
    }
};

$(function () {
    var typeName = $.cookie('type') || 'block';
    var type = types[typeName];

    $('input[type=radio][value=' + typeName + ']').prop('checked', true);

    $('input[type=radio]').click(function ()
    {
        $('input[type=radio][value=' + typeName + ']').prop('checked', false);
        var $this = $(this);
        $this.prop('checked', true);
        typeName = $this.val();
        $.cookie('type', typeName);
        type = types[typeName];
        $('textarea.source').trigger('change');
    });

    $('textarea.source').on('change mousedown keydown keyup', function ()
    {
        var text = $(this).val();

        var result = [];
        if (type.begin)
        {
            result.push(type.begin);
        }

        // Делаем из всего комментария массив строк и
        // убираем везде лишние пробельные символы.
        var lines = $.map(text.split('\n'), $.trim);
        $.each(lines, function (i, line)
        {
            // Каждая ascii строка - 7 обычных в высоту.
            var asciiline = [type.line, type.line, type.line, type.line, type.line, type.line, type.line];

            $.each(line.split(''), function ()
            {
                var ord = this.charCodeAt();

                // Пропускаем символы, которых нет в нашем шрифте.
                if (ord < 32 || ord > 126) return;

                // Собираем символ
                var offset = (ord - 32) * 7;
                asciiline[0] += font[offset + 0];
                asciiline[1] += font[offset + 1];
                asciiline[2] += font[offset + 2];
                asciiline[3] += font[offset + 3];
                asciiline[4] += font[offset + 4];
                asciiline[5] += font[offset + 5];
                asciiline[6] += font[offset + 6];
            });

            // Добавляем промежуток в одну строчку между ASCII строчками
            if (i) result.push(type.line);

            result = result.concat(asciiline);
        });

        if (type.end)
        {
            result.push(type.end);
        }

        // Закрываем комментарий и собираем все в одну строку
        result = result.join('\n');

        $('textarea.result').val(result);
    });

    $('textarea.result').on('focus click mouseup mousedown', function ()
    {
        // Переменная that заменяет this внутри коллбэка таймаута,
        // где this будет другой.
        var $this = $(this);

        // Без таймаута текст выделяется и после этого выделение снимается само.
        setTimeout(function ()
        {
            $this.select();
        }, 0);
    });

    $('textarea.source').select();
});
</script>
<style>
    body {
        text-align: center;
    }

    textarea.source {
        display: block;
        width: 400px;
        height: 150px;
        font-size: 38px;
        margin: 30px auto;
    }

    textarea.result {
        width: 400px;
        height: 150px;
        display: inline-block;
        font-family: monospace;
        font-size:6px;
        line-height:6px;
        white-space: pre;
        text-align: left;
    }

    label {
        padding: 10px;
        display: inline-block;
    }
</style>
</head>
<body>
<textarea class="source">Comment</textarea>
<div class="type">
    <label><input type="radio" name="type" value="block">/* */ </label>
    <label><input type="radio" name="type" value="inlineslashes">// </label>
    <label><input type="radio" name="type" value="inlinesharp"># </label>
    <label><input type="radio" name="type" value="html">&lt;!-- --&gt; </label>
</div>
<textarea class="result"></textarea>
</body>
</html>
